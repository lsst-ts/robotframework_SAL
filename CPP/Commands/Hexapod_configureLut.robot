*** Settings ***
Documentation    Hexapod_configureLut commander/controller tests.
Force Tags    cpp    
Suite Setup    Run Keywords    Log Many    ${Host}    ${subSystem}    ${component}    ${timeout}
...    AND    Create Session    Commander    AND    Create Session    Controller
Suite Teardown    Close All Connections
Library    SSHLibrary
Library    String
Resource    ../../Global_Vars.robot
Resource    ../../common.robot

*** Variables ***
${subSystem}    hexapod
${component}    configureLut
${timeout}    30s

*** Test Cases ***
Verify Component Commander and Controller
    [Tags]    smoke
    File Should Exist    ${SALWorkDir}/${subSystem}/cpp/src/sacpp_${subSystem}_${component}_commander
    File Should Exist    ${SALWorkDir}/${subSystem}/cpp/src/sacpp_${subSystem}_${component}_controller

Start Commander - Verify Missing Inputs Error
    [Tags]    functional
    Switch Connection    Commander
    Comment    Move to working directory.
    Write    cd ${SALWorkDir}/${subSystem}/cpp/src
    Comment    Start Commander.
    ${input}=    Write    ./sacpp_${subSystem}_${component}_commander 
    ${output}=    Read Until Prompt
    Log    ${output}
    Should Contain    ${output}   Usage : \ input parameters...

Start Commander - Verify Timeout without Controller
    [Tags]    functional
    Switch Connection    Commander
    Comment    Move to working directory.
    Write    cd ${SALWorkDir}/${subSystem}/cpp/src
    Comment    Start Commander.
    ${input}=    Write    ./sacpp_${subSystem}_${component}_commander 50.6359 40.5191 68.8924 48.7431 10.4113 1.4358 90.7314 29.0857 86.822 51.7501 13.8447 36.0253 94.4896 92.3145 8.7463 22.9327 38.8023 40.8105 78.2924 13.909 47.1095 7.1159 5.2934 81.5697 44.1912 31.7416 45.781 21.352 19.8079 39.2852 94.4603 38.601 63.633 62.0713 10.3298 74.81 19.7799 40.3976 97.2072 50.5663 36.729 26.6096 32.6967 97.5901 25.5999 33.4495 93.7697 12.7227 83.0375 48.1448 31.8264 99.1208 59.5013 9.2168 62.053 1.8568 35.2412 61.2623 43.0991 21.9995 87.7292 93.083 32.6503 42.4031 78.9733 55.3215 89.5172 16.0089 35.3601 26.5563 50.7849 53.3166 80.8469 71.0857 47.4047 43.4891 76.467 18.3367 4.2944 37.0881 96.1116 87.8752 13.5274 65.7647 37.1288 45.5546 93.012 89.7966 76.7377 54.3041 4.8016 94.3824 49.3522 83.0727 86.8077 64.463 71.2052 24.5865 18.9176 12.101 39.1026 96.7074 40.3823 43.7689 22.7499 46.0965 46.9242 78.5785 55.7717 34.7973 97.3182 88.6072 28.3089 12.4527 46.9991 94.4597 99.5786 89.26 72.5741 47.0465 35.9767 44.1077 8.1064 16.1905 81.1169 49.768 56.0194 9.0604 73.5128 97.7721 5.7685 41.0687 23.7204 26.4418 0.1238 76.5449 15.7383 32.2826 34.3208 69.369 53.0375 17.1963 49.546 15.9713 72.2068 63.7635 43.7577 22.3594 52.8438 68.2672 23.2516 45.0868 60.6752 99.6845 91.6936 26.0561 10.8298 18.3842 16.6233 71.0963 96.7281 70.6461 23.5795 75.9766 85.2025 42.2803 27.9905 2.3804 15.1129 75.7017 85.243 31.6139 79.4618 62.27 39.7019 83.0499 75.8343 61.9211 67.3972 99.3335 82.9798 50.584 43.8998 25.4574 26.9367 83.214 52.4506 28.2633 0.601 75.1499 49.0937 50.1934 14.1612 13.0443 2.4097 70.5973 69.9579 61.229 4.3533 61.1488 81.8425 57.7794 62.8054 59.0028 81.6974 5.6222 8.7023 7.0597 3.536 72.9379 42.4944 67.3475 59.571 76.6151 94.7169 91.946 74.7051 83.7946 69.1035 23.7197 61.7079 3.008 60.6063 16.097 36.565 36.167 27.5861 95.7603 43.6763 14.5433 61.9227 88.5908 48.9263 31.977 67.9673 32.5958 73.7844 13.3536 66.5856 69.4068 65.9941 15.4071 96.8596 54.6245 49.6955 98.2228 72.1538 46.9986 63.1909 38.3675 5.5563 41.7983 42.1845 17.2172 80.1284 40.6596 96.55 18.7613 39.5941 15.6142 22.8239 71.6932 86.3814 81.6308 7.418 1.9321 37.4199 81.4634 14.3126 43.6182 72.972 55.3001 45.1335 40.4053 19.0705 23.0152 96.1909 74.6508 88.4123 93.5895 13.6584 96.5528 42.5278 27.058 85.7342 9.663 9.9098 51.0266 54.2206 9.2279 56.9436 10.6793 18.4494 15.8971 50.1713 1.158 39.2634 52.319 92.3748 2.2117 21.4399 12.1361 52.6338 7.6991 59.9563 58.132 16.745 76.6328 44.4171 33.8465 7.5129 93.703 41.3875 41.0608 45.6244 51.9163 86.0514 64.3767 15.4256 53.0292 12.2529 37.505 32.4371 32.1134 10.9762 44.7158 94.4551 27.694 90.0029 34.0765 82.9459 46.0012 52.775 60.8751 83.7558 10.4759 46.2482 90.9066 74.8144 97.7446 92.8661 97.5446 86.0509 37.7698 22.1997 36.6016 37.4215 20.352 59.7508 25.0688 84.8679 30.3549 77.085 21.7899 94.215 6.7563 27.3625 48.2784 81.48 60.4128 49.7341 85.5557 1.9849 88.1307 46.8379 43.3337 34.7141 52.9461 72.4616 32.2275 87.5145 32.4194 87.2204 54.1503 2.4293 75.917 57.5737 29.9451 50.856 25.0753 11.8226 9.8864 71.6733 4.6032 30.9094 44.8941 58.5069 63.0875 89.828 88.8413 96.3941 71.3108 32.11 28.3378 93.4278 50.8922 94.2682 90.0577 16.8881 49.8488 82.262 74.6435 33.1381 10.6958 22.8544 37.9273 55.12 9.5971 40.5798 48.4719 41.0244 4.5929 71.533 75.9007 72.8933 73.0039 11.8287 18.9888 13.0835 23.1879 21.8316 21.5016 40.7632 56.0231 88.7893 43.9939 43.9774 95.7684 31.2523 62.1838 39.2196 19.5652 37.033 50.7877 98.2663 43.7288 46.8948 81.9238 38.0847 18.3926 62.5467 27.3302 45.2689 26.4724 63.0202 34.5702 5.0765 69.0001 52.8739 74.3583 0.0024 85.7036 77.1963 4.7006 25.3942 42.9456 88.608 5.7064 0.6428 24.3227 80.765 34.4983 1.9346 57.4747 87.0521 83.0647 6.2747 50.5216 46.2735 16.3321 71.4471 94.337 64.7782 96.9166 64.9459 96.5287 71.868 27.5655 2.9856 42.3178 82.2797 86.7706 83.5016 71.4372 22.7774 89.4564 2.0421 62.4787 91.1829 99.5504 29.6542 17.4494 76.1518 28.3952 64.7297 37.9295 93.7417 62.2982 83.784 91.43 68.7272 84.236 44.5064 77.015 83.1977 69.2008 71.2076 73.7226 1.0661 37.1877 21.8488 29.2582 33.7619 64.194 77.9788 16.3766 55.9303 51.972 5.697 51.8874 34.306 35.4732 0.2844 35.8605 72.859 44.1286 91.5989 74.4354 96.1181 9.1879 14.6149 43.1015 91.8097 99.7875 59.2777 3.6139 47.1783 69.1859 99.8261 96.6674
    ${output}=    Read Until Prompt
    Log    ${output}
    ${CmdComplete}=    Get Line    ${output}    -2
    Should Match Regexp    ${CmdComplete}    (=== \\[waitForCompletion_${component}\\] command )[0-9]+( timed out :)

Start Controller
    [Tags]    functional
    Switch Connection    Controller
    Comment    Move to working directory.
    Write    cd ${SALWorkDir}/${subSystem}/cpp/src
    Comment    Start Controller.
    ${input}=    Write    ./sacpp_${subSystem}_${component}_controller
    ${output}=    Read Until    controller ready
    Log    ${output}
    Should Contain    ${output}    ${subSystem}_${component} controller ready

Start Commander
    [Tags]    functional
    Switch Connection    Commander
    Comment    Move to working directory.
    Write    cd ${SALWorkDir}/${subSystem}/cpp/src
    Comment    Start Commander.
    ${input}=    Write    ./sacpp_${subSystem}_${component}_commander 50.6359 40.5191 68.8924 48.7431 10.4113 1.4358 90.7314 29.0857 86.822 51.7501 13.8447 36.0253 94.4896 92.3145 8.7463 22.9327 38.8023 40.8105 78.2924 13.909 47.1095 7.1159 5.2934 81.5697 44.1912 31.7416 45.781 21.352 19.8079 39.2852 94.4603 38.601 63.633 62.0713 10.3298 74.81 19.7799 40.3976 97.2072 50.5663 36.729 26.6096 32.6967 97.5901 25.5999 33.4495 93.7697 12.7227 83.0375 48.1448 31.8264 99.1208 59.5013 9.2168 62.053 1.8568 35.2412 61.2623 43.0991 21.9995 87.7292 93.083 32.6503 42.4031 78.9733 55.3215 89.5172 16.0089 35.3601 26.5563 50.7849 53.3166 80.8469 71.0857 47.4047 43.4891 76.467 18.3367 4.2944 37.0881 96.1116 87.8752 13.5274 65.7647 37.1288 45.5546 93.012 89.7966 76.7377 54.3041 4.8016 94.3824 49.3522 83.0727 86.8077 64.463 71.2052 24.5865 18.9176 12.101 39.1026 96.7074 40.3823 43.7689 22.7499 46.0965 46.9242 78.5785 55.7717 34.7973 97.3182 88.6072 28.3089 12.4527 46.9991 94.4597 99.5786 89.26 72.5741 47.0465 35.9767 44.1077 8.1064 16.1905 81.1169 49.768 56.0194 9.0604 73.5128 97.7721 5.7685 41.0687 23.7204 26.4418 0.1238 76.5449 15.7383 32.2826 34.3208 69.369 53.0375 17.1963 49.546 15.9713 72.2068 63.7635 43.7577 22.3594 52.8438 68.2672 23.2516 45.0868 60.6752 99.6845 91.6936 26.0561 10.8298 18.3842 16.6233 71.0963 96.7281 70.6461 23.5795 75.9766 85.2025 42.2803 27.9905 2.3804 15.1129 75.7017 85.243 31.6139 79.4618 62.27 39.7019 83.0499 75.8343 61.9211 67.3972 99.3335 82.9798 50.584 43.8998 25.4574 26.9367 83.214 52.4506 28.2633 0.601 75.1499 49.0937 50.1934 14.1612 13.0443 2.4097 70.5973 69.9579 61.229 4.3533 61.1488 81.8425 57.7794 62.8054 59.0028 81.6974 5.6222 8.7023 7.0597 3.536 72.9379 42.4944 67.3475 59.571 76.6151 94.7169 91.946 74.7051 83.7946 69.1035 23.7197 61.7079 3.008 60.6063 16.097 36.565 36.167 27.5861 95.7603 43.6763 14.5433 61.9227 88.5908 48.9263 31.977 67.9673 32.5958 73.7844 13.3536 66.5856 69.4068 65.9941 15.4071 96.8596 54.6245 49.6955 98.2228 72.1538 46.9986 63.1909 38.3675 5.5563 41.7983 42.1845 17.2172 80.1284 40.6596 96.55 18.7613 39.5941 15.6142 22.8239 71.6932 86.3814 81.6308 7.418 1.9321 37.4199 81.4634 14.3126 43.6182 72.972 55.3001 45.1335 40.4053 19.0705 23.0152 96.1909 74.6508 88.4123 93.5895 13.6584 96.5528 42.5278 27.058 85.7342 9.663 9.9098 51.0266 54.2206 9.2279 56.9436 10.6793 18.4494 15.8971 50.1713 1.158 39.2634 52.319 92.3748 2.2117 21.4399 12.1361 52.6338 7.6991 59.9563 58.132 16.745 76.6328 44.4171 33.8465 7.5129 93.703 41.3875 41.0608 45.6244 51.9163 86.0514 64.3767 15.4256 53.0292 12.2529 37.505 32.4371 32.1134 10.9762 44.7158 94.4551 27.694 90.0029 34.0765 82.9459 46.0012 52.775 60.8751 83.7558 10.4759 46.2482 90.9066 74.8144 97.7446 92.8661 97.5446 86.0509 37.7698 22.1997 36.6016 37.4215 20.352 59.7508 25.0688 84.8679 30.3549 77.085 21.7899 94.215 6.7563 27.3625 48.2784 81.48 60.4128 49.7341 85.5557 1.9849 88.1307 46.8379 43.3337 34.7141 52.9461 72.4616 32.2275 87.5145 32.4194 87.2204 54.1503 2.4293 75.917 57.5737 29.9451 50.856 25.0753 11.8226 9.8864 71.6733 4.6032 30.9094 44.8941 58.5069 63.0875 89.828 88.8413 96.3941 71.3108 32.11 28.3378 93.4278 50.8922 94.2682 90.0577 16.8881 49.8488 82.262 74.6435 33.1381 10.6958 22.8544 37.9273 55.12 9.5971 40.5798 48.4719 41.0244 4.5929 71.533 75.9007 72.8933 73.0039 11.8287 18.9888 13.0835 23.1879 21.8316 21.5016 40.7632 56.0231 88.7893 43.9939 43.9774 95.7684 31.2523 62.1838 39.2196 19.5652 37.033 50.7877 98.2663 43.7288 46.8948 81.9238 38.0847 18.3926 62.5467 27.3302 45.2689 26.4724 63.0202 34.5702 5.0765 69.0001 52.8739 74.3583 0.0024 85.7036 77.1963 4.7006 25.3942 42.9456 88.608 5.7064 0.6428 24.3227 80.765 34.4983 1.9346 57.4747 87.0521 83.0647 6.2747 50.5216 46.2735 16.3321 71.4471 94.337 64.7782 96.9166 64.9459 96.5287 71.868 27.5655 2.9856 42.3178 82.2797 86.7706 83.5016 71.4372 22.7774 89.4564 2.0421 62.4787 91.1829 99.5504 29.6542 17.4494 76.1518 28.3952 64.7297 37.9295 93.7417 62.2982 83.784 91.43 68.7272 84.236 44.5064 77.015 83.1977 69.2008 71.2076 73.7226 1.0661 37.1877 21.8488 29.2582 33.7619 64.194 77.9788 16.3766 55.9303 51.972 5.697 51.8874 34.306 35.4732 0.2844 35.8605 72.859 44.1286 91.5989 74.4354 96.1181 9.1879 14.6149 43.1015 91.8097 99.7875 59.2777 3.6139 47.1783 69.1859 99.8261 96.6674
    ${output}=    Read Until Prompt
    Log    ${output}
    Should Contain X Times    ${output}    === [issueCommand_${component}] writing a command containing :    1
    Should Contain X Times    ${output}    device : target    1
    Should Contain X Times    ${output}    property : lut    1
    Should Contain X Times    ${output}    action :     1
    Should Contain X Times    ${output}    value :     1
    Should Contain X Times    ${output}    xlut : 50.6359    1
    Should Contain X Times    ${output}    ylut : 4.8016    1
    Should Contain X Times    ${output}    zlut : 82.9798    1
    Should Contain X Times    ${output}    ulut : 72.972    1
    Should Contain X Times    ${output}    vlut : 49.7341    1
    Should Contain X Times    ${output}    wlut : 0.0024    1
    Should Contain    ${output}    === command configureLut issued =
    ${CmdComplete}=    Get Line    ${output}    -2
    Should Match Regexp    ${CmdComplete}    (=== \\[waitForCompletion_${component}\\] command )[0-9]+( completed ok :)

Read Controller
    [Tags]    functional
    Switch Connection    Controller
    ${output}=    Read Until    result \ \ : Done : OK
    Log    ${output}
    Should Contain    ${output}    === command configureLut received =
    Should Contain    ${output}    device : target
    Should Contain    ${output}    property : lut
    Should Contain    ${output}    action : 
    Should Contain    ${output}    value : 
    Should Contain X Times    ${output}    xlut : 50.6359    1
    Should Contain X Times    ${output}    ylut : 4.8016    1
    Should Contain X Times    ${output}    zlut : 82.9798    1
    Should Contain X Times    ${output}    ulut : 72.972    1
    Should Contain X Times    ${output}    vlut : 49.7341    1
    Should Contain X Times    ${output}    wlut : 0.0024    1
    Should Contain X Times    ${output}    === [ackCommand_configureLut] acknowledging a command with :    2
    Should Contain    ${output}    seqNum   :
    Should Contain    ${output}    ack      : 301
    Should Contain X Times    ${output}    error \ \ \ : 0    2
    Should Contain    ${output}    result   : Ack : OK
    Should Contain    ${output}    ack      : 303
    Should Contain    ${output}    result   : Done : OK
